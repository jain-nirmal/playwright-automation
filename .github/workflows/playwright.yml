name: Playwright Tests (Sharded)
on: [push, pull_request]
jobs:
 test:
 runs-on: ubuntu-latest
 strategy:
 fail-fast: false
 matrix:
 shardIndex: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 shardTotal: [10]

 steps:
 - uses: actions/checkout@v3
 - uses: actions/setup-node@v3

 - name: Install dependencies
 run: npm ci

 - name: Install Playwright
 run: npx playwright install --with-deps

 - name: Run tests (Shard ${{ matrix.shardIndex }}/${{
    matrix.shardTotal }})
      run: npx playwright test --shard=${{ matrix.shardIndex }}/${{
      matrix.shardTotal }}

      - uses: actions/upload-artifact@v3
 if: always()
 with:
 name: playwright-report-${{ matrix.shardIndex }}